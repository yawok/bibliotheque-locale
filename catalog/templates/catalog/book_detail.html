{% extends 'catalog/base_generic.html' %}
{% block content %}
  <div class="card rounded-5 card-style">
    <div class="card-body rounded-3">
      <h1 class="card-title welcome-card-title">{{ book.title }}</h1>
      <p class="card-text card-text-style">{{ book.summary }}</p>
      <ul class="list-group list-group-flush">
        <li class="list-group-item card-fact">
          <strong>Author:</strong><a href="{{ book.author.get_absolute_url }}">{{ book.author }}</a>
        </li>
        <li class="list-group-item card-fact">
          <strong>ISBN:</strong>{{ book.isbn }}
        </li>
        <li class="list-group-item card-fact">
          <strong>Language:</strong>{{ book.language }}
        </li>
        <li class="list-group-item card-fact">
          <strong>Genre:</strong>{{ book.genre.all|join:', ' }}
        </li>
        <li class="list-group-item card-fact">
          {% if user.is_staff %}
            <a class="btn update-btn" href="{% url 'book-update' book.id %}">Update</a>
            <a class="btn update-btn" href="{% url 'book-delete' book.id %}">Delete</a>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
  <div class="copies">
    <h1>Copies</h1>
    {% if book.bookinstance_set.all %}
      <div class="row row-cols-1 row-cols-lg-2 g-4 book-list ">
        {% for copy in book.bookinstance_set.all %}
          <div class="col">
            <div class="card book-list-style card-round-borders">
              <div class="card-body">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item card-fact  {% if copy.status == 'a' %}text-success{% elif copy.status == 'm' %}text-danger{% else %}text-warning{% endif %}">
                    {{ copy.get_status_display }}
                  </li>
                  <li class="list-group-item card-fact">
                    <strong>Due to be returned:</strong>
                    {% if copy.status != 'a' %}
                    <p class="card-text">
                        {{ copy.due_back }}
                      </p>
                    {% else %}
                      -
                    {% endif %}
                  </li>
                  <li class="list-group-item card-fact">
                    <strong>Imprint:</strong> {{ copy.imprint }}
                  </li>
                  <li class="list-group-item card-fact text-muted">
                    <strong>Id:</strong> {{ copy.id }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <h2>There are no books in the library.</h2>
    {% endif %}
  </div>
{% endblock content %}
